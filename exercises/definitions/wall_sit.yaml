# Wall Sit (Isometric)
name: "Wall Sit"
type: "duration"
description: "Isometric hold against wall for quad endurance"

# Angle definitions
angles:
  knee_angle:
    landmarks: [23, 25, 27]  # LEFT_HIP, LEFT_KNEE, LEFT_ANKLE
    range: [80, 100]  # Should be around 90 degrees
  hip_angle:
    landmarks: [11, 23, 25]  # LEFT_SHOULDER, LEFT_HIP, LEFT_KNEE
    range: [80, 100]  # Should be around 90 degrees
  back_angle:
    landmarks: [0, 11, 23]  # NOSE, LEFT_SHOULDER, LEFT_HIP
    range: [160, 180]  # Back should be straight

# State machine for duration exercise
states:
  - name: "STANDING"
    condition:
      angle: "knee_angle"
      operator: ">"
      value: 150
    next_state: "LOWERING"
    feedback: "Lower into wall sit position"
    
  - name: "LOWERING"
    condition:
      angle: "knee_angle"
      operator: "<"
      value: 100
    next_state: "HOLDING"
    feedback: "Hold this position!"
    
  - name: "HOLDING"
    condition:
      angle: "knee_angle"
      operator: ">"
      value: 120
    next_state: "STANDING"
    feedback: "Position broken - reset"

# Duration settings
duration:
  target_seconds: 30
  count_state: "HOLDING"  # Only count time in this state
  increment: 1  # Count seconds

# Counter (for duration exercises, counts seconds)
counter:
  increment_on: "HOLDING"  # Increment while in holding state
  count_type: "duration"  # Count time, not reps
  decrement_on: null

# Form feedback
feedback:
  - name: "knees_too_forward"
    description: "Knees going past toes"
    condition:
      type: "landmark_alignment"
      landmarks: [25, 27]  # Knee and ankle
      axis: "x"
      threshold: 0.05
    message: "Keep knees behind toes"
    priority: 1
    
  - name: "too_high"
    description: "Not sitting low enough"
    angle: "knee_angle"
    condition:
      operator: ">"
      value: 100
    state_trigger: "HOLDING"
    message: "Lower down - aim for 90Â° knee bend"
    priority: 1
    
  - name: "back_not_straight"
    description: "Back leaning forward"
    angle: "back_angle"
    condition:
      operator: "<"
      value: 165
    message: "Press back flat against wall"
    priority: 2

# No tempo for isometric
tempo:
  hold_seconds: 30  # Target hold time

# Visualization
visualization:
  primary_angle: "knee_angle"
  show_angles: ["knee_angle", "hip_angle"]
  highlight_landmarks: [23, 24, 25, 26]
  color_scheme: "green"
  show_timer: true
